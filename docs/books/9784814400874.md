# コンピュータシステムの理論と実装 <br>第 2 版 ―モダンなコンピュータの作り方

<div class="text-center">
    <img src="../../public/img/nand2tetris.png" alt="本の表紙" class="inline-block">
</div>

<div class="text-center">
    <a href="https://www.oreilly.co.jp/books/9784814400874/" class="text-center">
        コンピュータシステムの理論と実装 第 2 版 ―モダンなコンピュータの作り方
    </a>
</div>

## この本を読んだきっかけ

WebAssembly に関する論文を読み、自分の**低レイヤー**への理解度が"低い"ことが分かった。アプリ開発などでは、プログラミング言語の知識とライブラリの仕様など、高レイヤーのことだけを理解していれば十分だった。これまで抽象化を行い、インターフェースだけを参照し、目を逸らしてきた低レイヤーを本気で理解しようと思った。そこで、コンピュータサイエンスの分野における教科書として使われており、「現代のコンピュータをゼロから作る」というゴールを掲げている、この本を読み実践すべきだと感じた。

## まとめ

### 1 章 ブール論理

非物理的で、論理的なものとして抽象化された、コンピュータの構成要素として、最もアトミックな**論理ゲート**の実装が、この章のゴールである。

#### 1.1 ブール代数

ブール関数を定義する方法は以下の二つがある。

- **真理値表**：対象の状態を記述するのに便利な表現手段。
- **ブール式**：シリコン上で実装するのに便利な表現手段。

#### 1.2 論理ゲート

**ゲート**は、ブール関数を実装する物理的なデバイスである。論理ゲートは様々な技術を用いて実現できる。最も使われているのは「**電気**」だが、磁石、光、バイオ、量子などの技術でも実装できる。今日、ゲートはシリコンの上でトランジスタとして実装され、チップとしてパッケージ化されるのが一般的である。

ゲートの物理的な振る舞いはブール代数として**抽象化**し、表すことができる。そのため、コンピュータ科学者は、ゲートを実現する物理的な要素について基本的に考える必要がない。その代わりに、論理ゲートの抽象化された世界に集中することができる。

### 2 章 ブール算術

1 章で実装した論理ゲートをスタートとし、**算術論理演算機**（ALU）を実装するのがこの章のゴールである。ALU は、**中央演算装置**（CPU）で行う計算の中心を担う要素である。

#### 2.1 算術演算

汎用コンピュータとして、符号付き整数に対して少なくとも以下の算術演算を実行できる必要がある。

- 加算
- 符号変換
- 減算
- 比較
- 乗算
- 除算

算術演算だけでなく、コンピュータが実行できる全ての機能は、2 進数の加算に還元できる。

#### 2.4 符号付き 2 進数

n 桁の 2 進数は $2^n$ 通りの値をコード化できる。バイナリコードを使って符号付き整数を表現するのに、ほとんどのコンピュータでは**2の補数**を使用する。

#### 2.5 仕様
##### 半加算器
2つのビットの和を求める。出力の下位ビットをsumとし、上位ビットをcarryとする。carryは桁上がりを意味する。

##### 全加算器
3つのビットの和を求める。入力のうちcは下の桁からの桁上がりを意味する。名前の通り、半加算器を2つ組み合わせて実装できる。

##### 加算器　
2つのnビットの加算を行う。全加算器をn個組み合わせて実装できる。

##### インクリメンタ
与えられた値に1加えた値を返す。加算器チップを使用することで実現できるが、より効率的な専用のインクリメンタチップを実装できる。

##### ALU
加算などの算術演算と、論理和などの論理演算を計算するように設計されたチップである。入力x, yに対して、どのような演算を行うかを**制御ビット**で指定する。入力値をゼロにしたり反転したりするものや、行う演算を決めるもの、そして出力の後処理を行うものを、今回は用いる。